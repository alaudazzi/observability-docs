[[collect-data-with-aws-firehose]]
= Quickstart: Collect data with AWS Firehose

preview::[]

In this quickstart guide, you'll learn how to use AWS Firehose to send logs and metrics to Elastic.

The AWS Firehose streams are created using a CloudFormation template, which can collect all available CloudWatch logs and metrics for your AWS account.

This approach requires minimal configuration as the CloudFormation template creates a Firehose stream, enables CloudWatch metrics collection across all namespaces, and sets up an account-level subscription filter for CloudWatch log groups to send logs to Elastic via Firehose.
Optionally, you can use an AWS CLI command or upload the template to the AWS CloudFormation portal to customize parameter values.

IMPORTANT: Some AWS services need additional manual configuration to properly ingest logs and metrics. For more information, check the 
link:https://www.elastic.co/docs/current/integrations/aws[AWS integration] documentation.

Data collection with AWS Firehose is supported on ESS deployments in AWS, Azure and GCP. 

[discrete]
== Prerequisites

* A deployment using our hosted {ess} on {ess-trial}[{ecloud}]. The deployment includes an {es} cluster for storing and searching your data, and {kib} for visualizing and managing your data.
* A user with the `superuser` {ref}/built-in-roles.html[built-in role] or the privileges required to onboard data.
+ 
[%collapsible]
.Expand to view required privileges
====
* {ref}/security-privileges.html#privileges-list-cluster[**Cluster**]: `['monitor', 'manage_own_api_key']`
* {ref}/security-privileges.html#privileges-list-indices[**Index**]: `{ names: ['logs-*-*', 'metrics-*-*'], privileges: ['auto_configure', 'create_doc'] }`
* {kibana-ref}/kibana-privileges.html[**Kibana**]: `{ spaces: ['*'], feature: { fleet: ['all'], fleetv2: ['all'] } }`
====
* An active AWS account and the necessary permissions to create delivery streams.

NOTE: The default CloudFormation stack is created in the AWS region selected for the user's account. This region can be modified either through the AWS Console interface or by specifying a `--region` parameter in the AWS CLI command when creating the stack.

[discrete]
== Limitations

The AWS Firehose receiver has the following limitations:

* It does not support AWS PrivateLink.
* It is not available for on-premise Elastic Stack deployments. 

[discrete]
== Collect your data

. In {kib}, go to **Observability** and click **Add Data**.

. Select **Cloud**, **AWS**, and then select **AWS Firehose**.
+
[role="screenshot"]
image::images/quickstart-aws-firehose-entry-point.png[AWS Firehose entry point]

. Click **Create Firehose Stream in AWS** to create a CloudFormation stack from the CloudFormation template.

. Go back to the **Add Observability Data** page.

[discrete]
== Visualize your data

After installation is complete and all relevant data is flowing into Elastic,
the **Visualize your data** section allows you to access the different dashboards for the various services.

[role="screenshot"]
image::images/quickstart-aws-firehose-dashboards.png[AWS Firehose dashboards]

Here is an example of the VPC Flow logs dashboard:

[role="screenshot"]
image::images/quickstart-aws-firehose-vpc-flow.png[AWS Firehose VPC flow]

Refer to <<observability-introduction>> for a description of other useful features.
